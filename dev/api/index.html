<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Soss API · Soss.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Soss.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installing-soss/">Installing Soss</a></li><li><span class="tocitem">Examples</span></li><li class="is-active"><a class="tocitem" href>Soss API</a></li><li><a class="tocitem" href="../sossmlj/">SossMLJ.jl</a></li><li><a class="tocitem" href="../internals/">Internals</a></li><li><a class="tocitem" href="../misc/">Miscellaneous</a></li><li><a class="tocitem" href="../to-do-list/">To-Do List</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Soss API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Soss API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cscherrer/Soss.jl/blob/master/docs/src/api.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><ul><li><a href="#Soss.AbstractModel"><code>Soss.AbstractModel</code></a></li><li><a href="#Soss.Do-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.Do</code></a></li><li><a href="#Soss._unwrap_type-Tuple{Type{var&quot;#s1&quot;} where var&quot;#s1&quot;&lt;:Type}"><code>Soss._unwrap_type</code></a></li><li><a href="#Soss.after-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.after</code></a></li><li><a href="#Soss.before-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.before</code></a></li><li><a href="#Soss.importanceSample"><code>Soss.importanceSample</code></a></li><li><a href="#Soss.likelihood-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.likelihood</code></a></li><li><a href="#Soss.predictive-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.predictive</code></a></li><li><a href="#Soss.prior-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.prior</code></a></li><li><a href="#Soss.prune-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.prune</code></a></li><li><a href="#Soss.withmeasures-Tuple{Model}"><code>Soss.withmeasures</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Soss.AbstractModel" href="#Soss.AbstractModel"><code>Soss.AbstractModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractModel{A,B,M,Args,Obs}</code></pre><p>Gives an abstract type for all Soss models</p><p>Type variables ending in T are type-level representations used to reconstruct</p><p>N gives the Names of arguments (each a Symbol) B gives the Body, as an Expr M gives the Module where the model is defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/core/models/abstractmodel.jl#LL6-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.Do-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.Do-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.Do</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Do(m, xs...)</code></pre><p>Returns a model transformed by adding <code>xs...</code> to arguments. The remainder of the body remains the same, consistent with Judea Pearl&#39;s &quot;Do&quot; operator. Unneeded arguments are trimmed.</p><p><strong>Examples</strong></p><pre><code class="language-julia">m = @model (n, k) begin
    β ~ Gamma()
    α ~ Gamma()
    θ ~ Beta(α, β)
    x ~ Binomial(n, θ)
    z ~ Binomial(k, α / (α + β))
end;
Do(m, :θ)

# output
@model (n, k, θ) begin
        β ~ Gamma()
        α ~ Gamma()
        x ~ Binomial(n, θ)
        z ~ Binomial(k, α / (α + β))
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/basictransforms.jl#LL128-L153">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss._unwrap_type-Tuple{Type{var&quot;#s1&quot;} where var&quot;#s1&quot;&lt;:Type}" href="#Soss._unwrap_type-Tuple{Type{var&quot;#s1&quot;} where var&quot;#s1&quot;&lt;:Type}"><code>Soss._unwrap_type</code></a> — <span class="docstring-category">Method</span></header><section><div><p>we use this to avoid introduce static type parameters for generated functions</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/Soss.jl#LL41-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.after-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.after-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.after</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">after(m::Model, xs...; strict=false)</code></pre><p>Transforms <code>m</code> by moving <code>xs</code> to arguments. If <code>strict=true</code>, only descendants of <code>xs</code> are retained in the body. Otherwise, the remaining variables in the body are unmodified. Unused arguments are trimmed.</p><p><code>predictive(m::Model, xs...) = after(m, xs..., strict = true)</code></p><p><code>Do(m::Model, xs...) = after(m, xs..., strict = false)</code></p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; m = @model (n, k) begin
           β ~ Gamma()
           α ~ Gamma()
           θ ~ Beta(α, β)
           x ~ Binomial(n, θ)
           z ~ Binomial(k, α / (α + β))
       end;

julia&gt; Soss.after(m, :θ, strict=false) # same as Do(m, :θ)
@model (n, k, θ) begin
        β ~ Gamma()
        α ~ Gamma()
        x ~ Binomial(n, θ)
        z ~ Binomial(k, α / (α + β))
    end


julia&gt; Soss.after(m, :θ, strict = true) # same as predictive(m, :θ)
@model (n, θ) begin
        x ~ Binomial(n, θ)
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/utils.jl#LL80-L113">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.before-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.before-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.before</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">before(m::Model, xs...; inclusive=true, strict=true)</code></pre><p>Transforms <code>m</code> by retaining all ancestors of any of <code>xs</code> if <code>strict=true</code>; if <code>strict=false</code>, retains all variables that are not descendants of any <code>xs</code>. Note that adding more variables to <code>xs</code> cannot result in a larger model. If <code>inclusive=true</code>, <code>xs</code> is considered to be an ancestor of itself and is always included in the returned <code>Model</code>. Unneeded arguments are trimmed.</p><p><code>prune(m::Model, xs...) = before(m, xs..., inclusive = false, strict = false)</code></p><p><code>prior(m::Model, xs...) = before(m, xs..., inclusive = true, strict = true)</code></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; m = @model (n, k) begin
           β ~ Gamma()
           α ~ Gamma()
           θ ~ Beta(α, β)
           x ~ Binomial(n, θ)
           z ~ Binomial(k, α / (α + β))
       end;

julia&gt; Soss.before(m, :θ, inclusive = true, strict = true)
@model begin
        β ~ Gamma()
        α ~ Gamma()
        θ ~ Beta(α, β)
    end

julia&gt; Soss.before(m, :θ, inclusive = true, strict = false)
@model k begin
        β ~ Gamma()
        α ~ Gamma()
        θ ~ Beta(α, β)
        z ~ Binomial(k, α / (α + β))
    end

julia&gt; Soss.before(m, :θ, inclusive = false, strict = true) # same as Soss.prior(m, :θ)
@model begin
        β ~ Gamma()
        α ~ Gamma()
    end

julia&gt; Soss.before(m, :θ, inclusive=false, strict=false) # same as Soss.prune(m, :θ)
@model k begin
        β ~ Gamma()
        α ~ Gamma()
        z ~ Binomial(k, α / (α + β))
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/utils.jl#LL130-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.importanceSample" href="#Soss.importanceSample"><code>Soss.importanceSample</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">importanceSample(p(p_args), q(q_args), observed_data)</code></pre><p>Sample from <code>q</code>, and weight the result to behave as if the sample were taken from <code>p</code>. For example,</p><p>``` julia&gt; p = @model begin     x ~ Normal()     y ~ Normal(x,1) |&gt; iid(5) end;</p><p>julia&gt; q = @model μ,σ begin     x ~ Normal(μ,σ) end;</p><p>julia&gt; y = rand(p()).y;</p><p>julia&gt; importanceSample(p(),q(μ=0.0, σ=0.5), (y=y,)) Weighted(-7.13971.4 ,(x = -0.12280566635062592,) ````</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/importance.jl#LL3-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.likelihood-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.likelihood-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.likelihood</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">likelihood(m, xs...)</code></pre><p>Return a model with only the specified variables in the body. Required dependencies will be included as arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/basictransforms.jl#LL31-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.predictive-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.predictive-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.predictive</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">predictive(m, xs...)</code></pre><p>Returns a model transformed by adding <code>xs...</code> to arguments with a body containing only statements that depend on <code>xs</code>, or statements that are depended upon by children of <code>xs</code> through an open path. Unneeded arguments are trimmed.</p><p><strong>Examples</strong></p><pre><code class="language-julia">m = @model (n, k) begin
    β ~ Gamma()
    α ~ Gamma()
    θ ~ Beta(α, β)
    x ~ Binomial(n, θ)
    z ~ Binomial(k, α / (α + β))
end;
predictive(m, :θ)

# output
@model (n, θ) begin
        x ~ Binomial(n, θ)
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/basictransforms.jl#LL97-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.prior-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.prior-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.prior</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">prior(m, xs...)</code></pre><p>Returns the minimal model required to sample random variables <code>xs...</code>. Useful for extracting a prior distribution from a joint model <code>m</code> by designating <code>xs...</code> and the variables they depend on as the prior and hyperpriors.</p><p><strong>Example</strong></p><pre><code class="language-julia">m = @model n begin
    α ~ Gamma()
    β ~ Gamma()
    θ ~ Beta(α,β)
    x ~ Binomial(n, θ)
end;
Soss.prior(m, :x)

# output
@model begin
        β ~ Gamma()
        α ~ Gamma()
        θ ~ Beta(α, β)
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/basictransforms.jl#LL3-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.prune-Tuple{Model, Vararg{Any, N} where N}" href="#Soss.prune-Tuple{Model, Vararg{Any, N} where N}"><code>Soss.prune</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">prune(m, xs...)</code></pre><p>Returns a model transformed by removing <code>xs...</code> and all variables that depend on <code>xs...</code>. Unneeded arguments are also removed.</p><p><strong>Examples</strong></p><pre><code class="language-julia">m = @model n begin
    α ~ Gamma()
    β ~ Gamma()
    θ ~ Beta(α,β)
    x ~ Binomial(n, θ)
end;
prune(m, :θ)

# output
@model begin
        β ~ Gamma()
        α ~ Gamma()
    end</code></pre><pre><code class="language-julia">m = @model n begin
    α ~ Gamma()
    β ~ Gamma()
    θ ~ Beta(α,β)
    x ~ Binomial(n, θ)
end;
prune(m, :n)

# output
@model begin
        β ~ Gamma()
        α ~ Gamma()
        θ ~ Beta(α, β)
    end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/basictransforms.jl#LL53-L92">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Soss.withmeasures-Tuple{Model}" href="#Soss.withmeasures-Tuple{Model}"><code>Soss.withmeasures</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">withmeasures(m::Model) -&gt; Model</code></pre><p>julia&gt; m = @model begin     σ ~ HalfNormal()     y ~ For(10) do j         Normal(0,σ)     end end;</p><p>julia&gt; m<em>dists = Soss.withmeasures(m) @model begin         _σ</em>dist = HalfNormal()         σ ~ <em>σ</em>dist         <em>y</em>dist = For(10) do j                 Normal(0, σ)             end         y ~ <em>y</em>dist     end</p><p>julia&gt; ydist = rand(m<em>dists()).</em>y_dist For{GeneralizedGenerated.Closure{function = (σ, M, j;) -&gt; begin     M.Normal(0, σ) end,Tuple{Float64,Module}},Tuple{Int64},Normal{Float64},Float64}(GeneralizedGenerated.Closure{function = (σ, M, j;) -&gt; begin     M.Normal(0, σ) end,Tuple{Float64,Module}}((0.031328640120683524, Main)), (10,))</p><p>julia&gt; rand(ydist) 10-element Array{Float64,1}:   0.03454891487870426   0.008832782323408313  -0.007395186925623771  -0.030669004243492004  -0.01728630026691135   0.011892877715064682   0.025576319363013512  -0.029323425779917773  -0.020502677724193594   0.04612690097957398</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cscherrer/Soss.jl/blob/2fb8604498e3ed36771bea8ff0378a3a33867761/src/transforms/withmeasures.jl#LL5-L44">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../installing-soss/">« Installing Soss</a><a class="docs-footer-nextpage" href="../sossmlj/">SossMLJ.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 11 May 2021 02:56">Tuesday 11 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
